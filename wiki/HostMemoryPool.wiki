#summary How to deploy a MySQL connection pool on host.rupy.se
#labels Phase-Implementation

Using [http://memory.googlecode.com memory] ORM:

{{{
public class DataBase extends Service {
	public static Base BASE;
	public static Pool POOL;
	public static SQL SQL;

	public String path() { return "/somepath"; }

	public void create(Daemon daemon) {
		try {
			SQL = new SQL(daemon);
			POOL = new Pool(SQL, SQL);
			BASE = new Base();
			BASE.init(POOL);
		}
		catch(Exception e) {
			e.printStackTrace();
		}
	}

	public void destroy() {
		POOL.close();
	}

	public void filter(Event event) throws Exception, Event {}

	public static class SQL implements Log, Settings {
		public String host, pass, user, ip;
		
		public SQL(Daemon daemon) {
			try {
				JSONObject account = new JSONObject((String) daemon.send("{\"type\": \"account\"}"));
				host = account.getString("host");
				pass = account.getString("pass");
				ip = account.getString("ip");
			}
			catch(Exception e) {
				e.printStackTrace();
			}
		}

		public String driver() {
			return "com.mysql.jdbc.Driver";
		}

		public String url() {
			return "jdbc:mysql://" + ip + "/" + host.replaceAll("\\.", "_");
		}

		public String user() {
			return pass;
		}

		public String pass() {
			return pass;
		}

		public void message(Object o) {}
	}
}
}}}