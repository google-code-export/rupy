#summary Example of how to send compressed data.
#labels Phase-Implementation

This compresses the file on each request. If you have some customer fetched file you should obviously GZip it before deployment.

{{{
public static class Stats extends Service {
	public String path() { return "/stats.html"; }
	public void filter(Event event) throws Event, Exception {
		event.reply().header("Content-Encoding", "gzip");

		File file = new File("app/content/stats.html.gzip");
		file.createNewFile();
			
		GZIPOutputStream out = new GZIPOutputStream(new FileOutputStream(file));
		FileInputStream in = new FileInputStream("app/content/stats.html");

		Deploy.pipe(in, out);

		in.close();

		out.finish();
		out.close();

		in = new FileInputStream(file);

		Deploy.pipe(in, event.reply().output(file.length()));
			
		in.close();
	}
}
}}}